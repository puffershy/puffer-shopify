<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.puffer.shopify.mapper.ProductMapper">
    <sql id="Base_Column_List">
    spu AS spu, product_id AS productId, price AS price, flow_state AS flowState, state AS state, 
    create_time AS createTime, update_time AS updateTime
  </sql>
    <insert id="insert" parameterType="com.puffer.shopify.entity.ProductEntity">
    insert into tb_product (spu, product_id, price, 
      flow_state, state, create_time, 
      update_time)
    values (#{spu,jdbcType=VARCHAR}, #{productId,jdbcType=VARCHAR}, #{price,jdbcType=DECIMAL}, 
      #{flowState,jdbcType=TINYINT}, #{state,jdbcType=TINYINT}, #{createTime,jdbcType=TIMESTAMP}, 
      #{updateTime,jdbcType=TIMESTAMP})
  </insert>
    <update id="updateProductId">
        update set product_id = #{productId} where spu = #{spu}
    </update>
    <update id="updateState">
        update set state = #{state}   where spu = #{spu}
    </update>
    <select id="queryByProductId" resultType="com.puffer.shopify.entity.ProductEntity">
        select
        <include refid="Base_Column_List"/>
        from tb_product where product_id = #{productId}
    </select>
    <select id="queryList" resultType="com.puffer.shopify.entity.ProductEntity">
        select
        <include refid="Base_Column_List"/>
        from tb_product where state = #{state} limit #{index},#{size}
    </select>
</mapper>